# 寄存器的保存与恢复

下面代码分别把`ax,bx`这两个寄存器保存在栈中：

```c
push(ax);
push(bx);
```

保存过程：

![](https://image.coder.cat/stack11.png)

把栈中的值逐个恢复到寄存器中：

```c
pop(bx);
pop(ax);
```

恢复过程：

![](https://image.coder.cat/stack12.png)

这里要注意的是出栈和入栈的顺序是相反的，因为此时`栈顶`是之前`bx`的值，所以在恢复时需要先把`栈顶`的值弹出到`bx`，然后再把下一个值弹出至`ax`，这样就把值与寄存器对应起来了。


**并不是所有的寄存器都需要`保存与恢复`，根据约定把寄存器中的一部分划分为`被调用者保存`和`调用者保存`：**

