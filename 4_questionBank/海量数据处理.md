---
title: "海量数据处理"
layout: post
author: "Marco"
header-style: text
hidden: true
tags:
  - 数据库

---

## 计算机常见概念区分

> Marco

[toc]

### 1. 前言

### 2. 具体场景

#### 2.1 分而治之

* **给一个超过100G大小的log file，log中存着ip地址，设计算法找到出现次数最多的ip地址?**

  哈希切割topK。将100G的大文件分成1000份，根据同一个哈希函数HashFunc将ip映射到向对应的文件(每个文件的大小可以在内存中处理)中，相同的ip一定会被放在同一个文件中。然后处理每一个文件，找出出现次数最多的ip,每个文件中最大的value对应的key既为出现次数最多的ip。最后在比较1000个文件中的MAX,确定最终的出现次数最多的ip。如果需要找出topk，则需要以每个小文件中出现次数最多的ip建成一个最小堆，从而确定topK

#### 2.2 位图

* **给定100亿整数，设计算法找到只出现一次的整数？**

  > NOTE:`一个整数4个字节，100亿个整数400亿个字节，1G是10^9个字节，那么400亿个字节就是大约40G的内存`。
  >
  > 1Gb = 1024 Mb = 2^10 Mb = 2^20 Kb = 2^30 Byte ≈ 10^9 Byte

  使用位图以及位图的变形：http://blog.csdn.net/qq_35402412/article/details/79415172



### 2.3 布隆过滤器

* **给两个文件，分别有100亿个query，我们只有1G内存，如何找到两个文件交集？给出近似算法**

  使用布隆过滤器，将A切分后存入布隆过滤器，用B来依次进行对比，若找到，则这个**query**为交集

  https://www.cnblogs.com/tanwentao/p/15728311.html

  > 布隆过滤器常见用法：
  >
  > * 视频、文章每天都会产生很多新的内容，如何保证一个用户不会看到重复的内容？
  > * 判断一条`URL`是否在现有的`URL`集合之中(可以认为这里的数据量级上亿)？
  > * 对于`HTTP`缓存服务器，当本地局域网中的`PC`发起一条`HTTP`请求时，缓存服务器会先查看一下这个`URL`是否已经存在于缓存之中，如果存在的话就没有必要去原始的服务器拉取数据了(为了简单起见，我们假设数据没有发生变化)，这样既能节省流量，还能加快访问速度，以提高用户体验。
  > * 假设邮件服务器通过发送方的邮件域或者`IP`地址对垃圾邮件进行过滤，那么就需要判断当前的邮件域或者`IP`地址是否处于黑名单之中。如果邮件服务器的通信邮件数量非常大(也可以认为数据量级上亿)，那么也可以使用`Bloom Filter`算法。



### 附录

1. https://www.cnblogs.com/ciel717/p/16179892.html
2. https://blog.csdn.net/DreamsArchitects/article/details/122922889