### 基本概念


### 缓存映射方式
* **直接映射**
- **定义**：每个主存块只能映射到缓存中的一个固定位置。
- **优点**：实现简单，硬件成本低。
- **缺点**：冲突率高，容易出现缓存抖动。

* **全相联映射**
- **定义**：主存块可以映射到缓存中的任何位置。
- **优点**：减少冲突，缓存利用率高。
- **缺点**：硬件复杂度高，访问延迟较大。

* **组相联映射**
- **定义**：将缓存分成若干组，每个主存块可以映射到某一组内的任意位置。
- **优点**：平衡了直接映射和全相联映射的优缺点。
- **缺点**：硬件复杂度介于两者之间。

---

### 缓存替换策略
* **最近最少使用（LRU）**
- **描述**：优先替换最近最少使用的缓存行。
- **优点**：能较好地反映实际访问模式。
- **缺点**：硬件实现复杂。

* **先进先出（FIFO）**
- **描述**：按进入缓存的先后顺序替换。
- **优点**：实现简单。
- **缺点**：不能充分利用访问局部性。

* **随机替换（Random Replacement）**
- **描述**：随机选择一个缓存行进行替换。
- **优点**：实现简单。
- **缺点**：性能较低。

* **其他替换策略**
- **LFU（Least Frequently Used）**：替换访问频率最低的缓存行。
- **MRU（Most Recently Used）**：替换最近最常使用的缓存行。


---

### 缓存一致性
* **缓存一致性问题**
- 当多个处理器核心共享内存时，不同缓存中可能存储相同内存位置的副本，可能导致数据不一致。

* **缓存一致性协议**
* ** MESI 协议**
- **状态**：Modified、Exclusive、Shared、Invalid。
- **特点**：保证缓存数据的一致性，支持高效的读写操作。

* ** MOESI 协议**
- **状态**：在 MESI 基础上增加 Owned 状态，支持更高效的共享访问。

* ** MSI 协议**
- **状态**：Modified、Shared、Invalid。
- **特点**：最基础的一致性协议，开销小。

* ** 其他一致性协议**
- **伪共享解决方案**：通过减少缓存行冲突来优化性能。

