## docker

### 1. 什么是docker
Docker 是一种开源的容器技术,它可以让开发者将应用程序及其依赖环境打包到一个轻量级/可移植的容器中,然后发布到任何支持 Docker 的系统上,无论这个系统是一台物理机/虚拟机,还是云服务器.

#### 1.1 docker之前是怎么做的?为什么要用docker替代?
在 Docker 出现之前,开发者和运维人员通常使用虚拟机技术来隔离应用和环境.虚拟机技术通过模拟硬件来运行多个完全隔离的操作系统实例.然而,虚拟机有一些缺点,例如资源占用多,启动慢,运行效率低等.

使用 Docker 之后,带来了以下优点:

1. **轻量级**:Docker 容器共享主机的内核,不需要像虚拟机那样为每个应用运行一个完整的操作系统.因此,Docker 容器占用的资源更少,启动更快.

2. **便于移植**:Docker 容器可以在任何安装了 Docker 的系统上运行,无需考虑环境问题.

3. **版本控制和分发**:Docker 提供了镜像(Image)机制,你可以将你的应用和环境打包成一个镜像,然后进行版本控制和分发.

4. **隔离性**:每个 Docker 容器都运行在一个独立的命名空间,容器之间互不影响.

5. **自动化**:Docker 提供了自动化的应用部署/扩缩容/版本升级等功能.

6. **集成 CI/CD**:Docker 可以很好地集成到现代的持续集成和持续部署流程中.

总的来说,Docker 通过提供一种轻量级/标准化/易于分发和自动化的方式来打包和运行应用,极大地提高了开发和运维的效率.

  - 机器轻量:只打包了必要的Bin/Lib之类的
  - 秒级部署:容器的部署非常快
  - 易于移植:一次构建,可以非常方便地部署到大部分环境.


### 2. docker原理是什么
Docker 的工作原理主要基于 Linux 的一些核心技术,包括 Cgroups(控制组)/Namespaces(命名空间)和 Union file systems(联合文件系统).

1. **Cgroups(控制组)**:Docker 使用 Cgroups 技术来限制和隔离资源.例如,你可以限制一个容器只能使用一定的 CPU 和内存资源.

2. **Namespaces(命名空间)**:Docker 使用 Namespaces 技术来实现容器的隔离.例如,每个容器都有自己的网络/进程和文件系统命名空间,这使得每个容器都像是在运行自己的独立系统.

3. **Union file systems(联合文件系统)**:Docker 使用联合文件系统来构建和运行容器.联合文件系统允许 Docker 使用层(Layers)来构建镜像,这使得镜像构建和分发更加高效.

当你运行一个 Docker 容器时,Docker 会创建一个新的进程和网络命名空间,挂载一个读写文件系统,并从宿主机上分配一些资源给这个新的命名空间.然后,Docker 在这个新的环境中启动你指定的应用程序.

这就是 Docker 的基本工作原理.通过使用 Linux 的这些核心技术,Docker 可以提供一个轻量级/隔离的环境来运行应用程序.


### 3. docker怎么用
Docker 的常用命令主要包括以下几类:

1. **镜像管理**:
   - `docker pull`:从 Docker Hub 或其他 Docker 镜像仓库下载镜像.
   - `docker build`:根据 Dockerfile 构建新的镜像.
   - `docker images`:列出本地所有的镜像.
   - `docker rmi`:删除一个或多个镜像.

2. **容器管理**:
   - `docker run`:创建并启动一个新的容器.
   - `docker start`:启动一个或多个已经停止的容器.
   - `docker stop`:停止一个或多个正在运行的容器.
   - `docker restart`:重启一个或多个容器.
   - `docker rm`:删除一个或多个容器.
   - `docker ps`:列出正在运行的容器.
   - `docker ps -a`:列出所有的容器,包括正在运行的和已经停止的.

3. **容器操作**:
   - `docker exec`:在运行的容器中执行命令.
   - `docker logs`:获取容器的日志输出.
   - `docker inspect`:获取容器的详细信息.

4. **网络管理**:
   - `docker network create`:创建一个新的网络.
   - `docker network rm`:删除一个网络.
   - `docker network ls`:列出所有的网络.
   - `docker network connect`:将一个容器连接到一个网络.
   - `docker network disconnect`:将一个容器从一个网络断开.

5. **数据卷管理**:
   - `docker volume create`:创建一个新的数据卷.
   - `docker volume rm`:删除一个数据卷.
   - `docker volume ls`:列出所有的数据卷.
   - `docker volume inspect`:获取数据卷的详细信息.

以上就是 Docker 的一些常用命令,你可以通过 `docker command --help` 来获取每个命令的详细用法.


### 4. 什么是k8s

Kubernetes(通常缩写为 K8s)是一个开源平台,用于自动化部署/扩展和管理容器化应用程序.它最初是由 Google 设计,现在由 Cloud Native Computing Foundation(CNCF)维护和支持.

Kubernetes 提供了一个强大的容器编排系统,使得开发者和运维团队能够轻松地管理容器化应用的部署/扩展和运维.主要特性包括:

- **容器编排**:Kubernetes 允许你定义/部署和扩展容器化应用程序.它可以处理容器的生命周期,确保应用程序的副本在集群中正确运行.

- **自动化**:Kubernetes 提供了自动化的部署和扩展机制,可以根据应用程序的需求动态地调整副本数量.它还支持滚动更新/自我修复等功能.

- **服务发现和负载均衡**:Kubernetes 提供了服务发现机制,让容器能够通过服务名相互通信.同时,它还支持负载均衡,确保流量均匀地分布到可用的容器上.

- **配置和存储管理**:Kubernetes 允许你管理应用程序的配置,包括环境变量/配置文件等.它还提供了持久化存储的解决方案,确保数据的持久性和可靠性.

- **跨多云和多数据中心**:Kubernetes 支持在多云环境和多个数据中心中运行,使得应用程序更具弹性和可移植性.

Kubernetes 已经成为云原生应用开发和部署的事实标准之一,被广泛应用于大规模/分布式的系统中.