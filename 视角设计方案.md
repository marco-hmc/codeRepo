视角设计方案

## 0. 设计整体思路

* 视角设计目标
    * BmDbView支持多个视角信息。

* 简要概述设计实现
    * 从BmDbView抽离视角相关信息，新增视角相关Do，使得BmDbView和视角信息不是一一对应。
    * 外部尽可能不感知视角，视角的意义仅仅是因为BmDbView可以有多个视角。BmDbView需要存储这些多个视角，新的Do仅是作为BmDbView的补充。

* 存在的问题
    1. BmDbView的视角信息修改的时候，会不会影响其他构件？怎么影响？这些构件需要重生成吗？
        会影响其他构件，目前貌似只影响BmViewCropRegionViewItem。修改了视角信息之后，需要对这个构件重生成。
        为了解耦，应该是修改的时候能够触发一个monitor完成这个重生成过程。

    2. BmDbView目前仅三维视图需要多份视角，其他视图怎么处理？
        视角信息以一个容器方式存储，所有BmDbView都有视角信息，所以实际上是只有三维视图能够添加视角信息而已。
        其他视图不能添加。

    3. 标注与视角是绑定关系。当前视图创建下的注释、标注仅当前视角能看。如何实现这个功能？
        文字构件和标注构件都有类似的要求，两者都要求仅在创建视图下可见。

        文字构件的实现是依赖于BmDbViewConfigure，shouldCreateCounterpart的时候判断，是在重生成的过程中解决visible问题。而视角是复用了BmDbView方法，两者方法不同。

        而标注构件（对齐等等）的实现是依赖于Editor创建约束的时候，给标注上了一个route，然后同样也是在shouldCreateCounterpart的过程中解决仅创建视图可见问题。

        对于视角而言，视图是复用的，不完全一样。


## 1. 具体方案设计
### 1.1 数据定义
#### 1.1.1 原来相关数据定义
BmDbView::AO{
    MvpMatrix,  // ModelViewProjectionMatrix
    BoundBox,  // 视图包围盒       
    DatumHeight,  // 基准高度

    ~V_CoordinateDisplay,  // 是否显示坐标，父类属性
    ~V_viewScale,  // 视图比例
    ~V_displayStyle,  // 视觉样式
    ~V_viewDirty,  
}

BmDbView::Route{
    workPlane,
    levelElement
}

#### 1.1.2 新的相关数据定义
BmDbView::AO{
    + ArrAngleOfView,  // 视角(Arr<{eye, center, up, distance}>)
}

### 1.2 外部接口
* 新增ViewAngularCreateCmd
    * 创建视角的时候，会在BmDbViewAngular写入一组新的视角信息
* ViewPanel适配
    * openViewAngular
        * getTargetAngularViewByName(ui_item_name) // by ui_item info, such as angular view name
        * setAngularViewForView(view_angular_info)
        * openView(rootId, viewId)
    * ...

### 1.3 monitor
notifyViewChange(); // including angular view 
    * BmViewCropRegionViewItem
notifyAngularViewChange();
