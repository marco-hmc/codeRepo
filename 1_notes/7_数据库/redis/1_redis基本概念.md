## Redis中跳表

> marco

### 1. 基本概念

- ***什么是redis？***

  ​	Redis(Remote Dictionary Server) 是一个使用 C 语言编写的，开源的（BSD许可）高性能非关系型（NoSQL）的键值对数据库。Redis 可以**存储键和五种不同类型的值之间的映射**。**键的类型只能为字符串，值支持五种数据类型**：**字符串、列表、集合、散列表、有序集合**

  ​	与传统数据库不同的是 Redis 的数据是**存在内存中**的，所以**读写速度非常快**，因此 redis 被广泛应**用于缓存方向**，每秒可以处理超过 10万次读写操作，是**已知性能最快**的Key-Value DB。另外，Redis 也经常用来**做分布式锁**。除此之外，Redis 支持**事务 、持久化、LUA脚本、LRU驱动事件、多种集群方案**

- ***redis的优缺点有哪些?***

  - 优点
    - **读写性能优异**， redis能读的速度是110000次/s，写的速度是81000次/s
    - 支持**数据持久化**，支持AOF和RDB两种持久化方式
    - **支持事务**，Redis的所有操作都是原子性的，同时Redis还支持对**几个操作合并后的原子性执行**
    - **数据结构丰富**，除了支持string类型的value外还支持hash、set、zset、list等数据结构
    - **支持主从复制**，主机会自动将数据同步到从机，可以进行读写分离
  - 缺点
    - 数据库**容量受到物理内存的限制**，不能用作海量数据的高性能读写，因此Redis适合的场景主要局限在较小数据量的高性能操作和运算上
    - Redis **不具备自动容错和恢复功能**，主机从机的宕机都会导致前端部分读写请求失败，需要等待机器重启或者手动切换前端的IP才能恢复
    - 主机宕机，**宕机前有部分数据未能及时同步到从机**，切换IP后还会引入**数据不一致**的问题，降低了系统的可用性
    - Redis **较难支持在线扩容，在集群容量达到上限时在线扩容会变得很复杂**。为避免这一问题，运维人员在系统上线时必须确保有足够的空间，这对资源造成了很大的浪费

- ***redis为什么这么快？***

  * **完全基于内存，绝大部分请求是纯粹的内存操作，非常快速**。数据存在内存中，类似于 HashMap，HashMap 的优势就是查找和操作的时间复杂度都是$\textbf{O}(1)$
  * **数据结构简单，对数据操作也简单**，Redis 中的数据结构是专门进行设计的
  * **采用单线程**，**避免了不必要的上下文切换和竞争条件**，**也不存在多进程或者多线程导致的切换而消耗 CPU，不用去考虑各种锁的问题，不存在加锁释放锁操作，没有因为可能出现死锁而导致的性能消耗**
  * **使用多路 I/O 复用模型，非阻塞 IO**
  * **使用底层模型不同**，它们之间底层实现方式以及与客户端之间通信的应用协议不一样，Redis 直接自己**构建了 VM 机制** ，因为一般的系统调用系统函数的话，会浪费一定的时间去移动和请求