**多线程和多进程切换的损耗是什么?**

上下文切换(Context Switching):
* 多线程: 线程切换时,只需切换线程的上下文信息,包括寄存器/栈指针等.这个过程相对较轻量,因为线程共享同一进程的地址空间.
* 多进程: 进程切换时,需要切换整个进程的上下文,包括虚拟内存映射/文件描述符/寄存器等.这是一个相对重量级的操作.

内存切换(Memory Switching):
* 多线程: 线程在同一进程中共享内存空间,因此不涉及实际的内存切换.线程切换时,只需切换栈和寄存器等上下文信息.
* 多进程: 不同进程有独立的内存空间,进程切换时需要切换实际的内存映射,这可能涉及到页表的切换和TLB(Translation Lookaside Buffer)的重填.

性能损耗:
  * 多线程: 由于线程共享同一进程的地址空间,线程切换通常比进程切换更快速,因为上下文切换的开销较小.
  * 多进程: 进程切换的代价相对较高,因为需要切换独立的地址空间.
总体而言,多线程的上下文切换通常比多进程的上下文切换更为轻量级,因为线程之间共享进程的资源.在选择多线程还是多进程时,需要根据具体的应用场景/需求和性能考虑来做出决策.