#### (6) 操作系统的内存管理说一下

https://www.cnblogs.com/peterYong/p/6556619.html

https://zhuanlan.zhihu.com/p/141602175

操作系统的内存管理包括物理内存管理和虚拟内存管理

- 物理内存管理包括交换与覆盖,分页管理,分段管理和段页式管理等;
- 虚拟内存管理包括虚拟内存的概念,页面置换算法,页面分配策略等;

(面试官这样问的时候,其实是希望你能讲讲虚拟内存)

但是实际中更常见的是进程加线程的结合方式,并不是非此即彼的.

#### 1. 分段分页机制

- 讲讲你对 Linux 内存的了解?
- Linux 内存的页表的作用是什么?
- Linux 内核地址空间的布局,内核地址空间是如何访问物理内存的?
- https://blog.csdn.net/zzxiaozhao/article/details/102527023
  - https://www.tutorialspoint.com/operating_system/index.htm

#### (24)在执行 malloc 申请内存的时候,操作系统是怎么做的?/内存分配的原理说一下/malloc 函数底层是怎么实现的?/进程是怎么分配内存的?

https://blog.csdn.net/yusiguyuan/article/details/39496057

从操作系统层面上看,malloc 是通过两个系统调用来实现的: brk 和 mmap

- brk 是将进程数据段(.data)的最高地址指针向高处移动,这一步可以扩大进程在运行时的堆大小
- mmap 是在进程的虚拟地址空间中寻找一块空闲的虚拟内存,这一步可以获得一块可以操作的堆内存.

通常,分配的内存小于 128k 时,使用 brk 调用来获得虚拟内存,大于 128k 时就使用 mmap 来获得虚拟内存.

进程先通过这两个系统调用获取或者扩大进程的虚拟内存,获得相应的虚拟地址,在访问这些虚拟地址的时候,通过缺页中断,让内核分配相应的物理内存,这样内存分配才算完成.

#### (17) 内核空间和用户空间是怎样区分的

在 Linux 中虚拟地址空间范围为 0 到 4G,最高的 1G 地址(0xC0000000 到 0xFFFFFFFF)供内核使用,称为内核空间,低的 3G 空间(0x00000000 到 0xBFFFFFFF)供各个进程使用,就是用户空间.

内核空间中存放的是内核代码和数据,而进程的用户空间中存放的是用户程序的代码和数据.
