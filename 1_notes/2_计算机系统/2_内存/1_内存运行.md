* 地址如何转换

### 1. 什么是内存

* 为什么要有内存？
  CPU比磁盘速度快太多，因此内存的主要作用就是缓和CPU与硬盘之间的速度矛盾。不然cpu会一直等待磁盘传数据处理，浪费cpu性能。
  而现在而言，内存相比cpu也是太慢了，因此靠近cpu的还有一个寄存器，也可以叫缓存，缓存比内存速度 更快。

* 为什么内存比硬盘快？
  内存的速度之所以比硬盘的速度快(不是快一点，而是快很多)，是因为它们的存储原理和读取方式不一样。
  * 硬盘是机械结构，通过磁头的转动读取数据。一般情况下台式机的硬盘为每分钟 7200 转，而笔记本的硬盘为每分钟 5400 转。
  * 而内存是没有机械结构的，内存是通过电存取数据的。

* 为了使用内存，操作系统需要提供什么能力？
  1. 操作系统负责**内存空间的分配与回收**
  2. 操作系统需要提供某种技术从逻辑上**对内存空间进行扩充**
  3. 操作系统需要提供**地址转换功能**，负责程序的逻辑地址与物理地址的转换
  4. 操作系统需要提供**内存保护功能**.保证各进程在各自存储空间内运行，互不干扰

### 2. 内存运行的基本原理

#### 2.1 指令的工作原理
计算机指令的工作原理基于计算机的基本工作流程，即取指/译码/执行/写回。以下是这个过程的详细描述:

  取指(Fetch)：计算机从内存中获取指令。这个过程由程序计数器(PC)控制，程序计数器保存了下一条要执行的指令的内存地址。
  译码(Decode)：计算机解析或译码指令，确定要执行的操作(例如，加法/乘法/加载/存储等)以及操作的操作数。
  执行(Execute)：计算机执行指令，进行相应的运算或者操作。
  写回(Write Back)：如果指令执行的结果需要保存，那么结果将被写回到内存或者寄存器中。

这个过程在计算机中不断重复，使得计算机可以执行一系列的指令，完成各种各样的任务。

#### 2.2 逻辑地址vs物理地址
逻辑地址和物理地址是计算机内存管理中的两个重要概念。

- **逻辑地址**:也被称为虚拟地址，是程序生成的地址。当程序需要访问内存时，它会生成一个逻辑地址。这个地址是相对于程序的，不依赖于实际的物理内存布局。逻辑地址的使用使得每个程序都可以认为自己独占了全部的内存空间，这极大地简化了程序的编写。

- **物理地址**:是实际内存硬件的地址。物理地址是内存条上每个字节的唯一标识，它决定了数据在内存中的实际位置。

在程序运行时，操作系统和硬件会将程序的逻辑地址转换为物理地址，这个过程被称为地址转换或地址映射。地址转换的具体方式取决于操作系统和硬件的设计，常见的方法包括分段/分页和段页式等。

通过使用逻辑地址和物理地址，操作系统可以实现内存保护/虚拟内存和动态加载等功能。

#### 2.3 程序运行
  * 编辑：编辑源代码
  * 编译：由编译程序将用户源代码，即多个`.cpp`文件编译成若干个目标模块(把高级语言翻译为机器语言)
  * 链接：由链接程序将编译后形成的一组目标模块，以及所需库函数链接在一起，形成一个完整的装入模块
  * 装入(装载)：由装入程序将装入模块装入内存运行。
