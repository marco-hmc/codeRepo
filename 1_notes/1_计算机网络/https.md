## https
### 1. concepts
- ***什么是HTTPS?***
  [http vs https](https://snailclimb.gitee.io/javaguide/#/./docs/cs-basics/network/http&https)

#### 1.1 数字证书
- 数字证书的了解

  - 权威CA使用私钥将网站A的信息和消息摘要(签名S)进行加密打包形成数字证书.公钥给客户端.

    网站A将自己的信息和数字证书发给客户端,客户端用CA的公钥对数字证书进行解密,得到签名S,与手动将网站的信息进行消息摘要得到的结果S*进行对比,如果签名一致就证明网站A可以信任.


- 数字证书的了解(高频)
![fig/数字证书.jpg](fig/数字证书.jpg)

权威CA使用私钥将网站A的信息和消息摘要(签名S)进行加密打包形成数字证书.公钥给客户端.

网站A将自己的信息和数字证书发给客户端,客户端用CA的公钥对数字证书进行解密,得到签名S,与手动将网站的信息进行消息摘要得到的结果S\*进行对比,如果签名一致就证明网站A可以信任.

- HTTPS 为了安全🔐,我愿意带上套
![http_cover](./img/https_cover.png)

好了,这次渣男要带上🔐安全套了,妈妈再也不用担心我的安全了.<br>
[https加密流程传送门](https://github.com/HXWfromDJTU/blog/blob/master/network/http/https.md)

具体的加密🔐通过以上来了解,加密套路,三个随机数生成一样的密钥,一对密钥一样,解密双方加密的数据,那么这里要讲一下重放和篡改


#### (26) https的具体实现,怎么确保安全性
**SSL是传输层的协议**

https包括非对称加密和对称加密两个阶段,在客户端与服务器建立连接的时候使用非对称加密,连接建立以后使用的是对称加密.

1. 客户使用https的URL访问Web服务器,要求与Web服务器建立SSL连接
2. Web服务器收到客户端请求后,会将网站的公钥传送一份给客户端,私钥自己保存.
3. 客户端的浏览器根据双方同意的安全等级,生成对称加密使用的密钥,称为会话密钥,然后利用网站的公钥将会话密钥加密,并传送给网站
4. Web服务器利用自己的私钥解密出会话密钥.
5. Web服务器利用会话密钥加密与客户端之间的通信,这个过程是对称加密的过程.

服务器第一次传给客户端的公钥其实是CA对网站信息进行加密的数字证书

客户端的对称加密密钥其实是三个随机数的哈希(1. 客户端第一次给服务端发送请求时附带的随机数 2. 服务器返回时的随机数 3. 客户端收到返回时的随机数)

#### 重放与篡改
重放即黑客通过截取的包，用来发送N次，达到攻击服务端，令服务端崩溃的策略。而这个即通过唯一的timestamp和Nonce随机数联合起来，做一个不可逆的签名来保证，timestamp设定在60秒后过期。要是这个请求被截取，需要在60秒内重放，过期失效，但是要是加上nonce，随机数，就足够难重放了。因为在短时间内，连续生成连个相同的nonce的情况几乎为0。<br>
还有就是服务器也可以将多余的请求去掉，使黑客根本没办法重放攻击。<br>
例如下面这个请求`http://a.com?uid=123&timestamp=1480556543&nonce=43f34f33&sign=80b886d71449cb33355d017893720666`
服务端工作:<br>
1. 先验证签名sign是不是合理的，证明请求参数没有被中途篡改
2. 验证timestamp是否过期，证明请求是在最近60s被发出的
3. 最后验证nonce是不是已经有了，证明这个请求不是60s内的重放请求


#### (25) http和https的区别,由http升级为https需要做哪些操作
http 是超文本传输协议,信息是明文传输, https 则是具有安全性的 ssl 加密传输协议
http 和 https 使用的是完全不同的连接方式,用的端口也不一样,前者是 80 ,后者是 443
http 的连接很简单,是无状态的; HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输/身份认证的网络协议,比http 协议安全.
https 协议需要到 ca 申请证书,一般免费证书较少,因而需要一定费用
https://www.cnblogs.com/wqhwe/p/5407468.html

