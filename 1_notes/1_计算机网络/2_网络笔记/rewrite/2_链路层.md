## 计算机网络

### 1. 基本概念

链路层(Link Layer)是计算机网络的四层模型中的第二层,它负责在网络节点之间传输数据.以下是一些关于链路层的基本知识:

对于开发者来说,以下是一些在链路层需要了解的关键概念:

1. **MAC地址**:这是链路层用来标识网络设备的唯一地址.在某些应用中,如MAC地址过滤,你可能需要处理MAC地址.

2. **帧**:链路层的数据单位是帧.理解帧的结构,包括头部/数据负载和尾部,对于理解网络数据的传输和处理很重要.

3. **错误检测和纠错**:链路层使用各种技术,如奇偶校验/循环冗余检查(CRC)来检测和纠正数据传输中的错误.在开发网络应用或硬件时,可能需要实现或使用这些技术.

4. **流量控制和可靠传输**:链路层可以使用流量控制技术来防止发送方过快地发送数据,导致接收方无法处理.此外,一些链路层协议还提供了可靠传输功能,如自动重传请求(ARQ).

5. **链路层交换**:理解链路层交换和链路层交换设备(如交换机)的工作原理,对于理解网络数据的路由和转发很重要.

6. **链路层协议**:了解常见的链路层协议,如以太网(Ethernet)/Wi-Fi和点对点协议(PPP),可以帮助你理解网络数据的封装和传输.

以上这些概念对于开发网络应用或进行网络编程都是非常重要的.

### 2. ARP协议

- ***mac地址?***

### 从物理层到MAC层
原来这两个层次是不一样的.<br>
物理层,数据链路层,网络层,传输层,应用层.<br>
第一层,物理层<br>
水晶头,1-3,2-6交叉接法<br>
集线器叫做HUB,完全实在物理层工作,会将自己的收到的每一个子节都复制到其他端口上去.<br>
第二层,数据链路层.<br>
Hub采取的是广播的模式,所以每一台电脑发出去的包,每个电脑都收到.<br>
数据链路层,也就是MAC层,全称Medium Access Control,媒体访问控制.控制什么?
* 控制在往媒体上发数据的时候,谁先发/谁后发的问题.
物理地址(链路层地址).因第二层主要解决媒体接入控制问题,所以常被称为MAC地址.<br>
* 解决 **多路访问** 这样,多路访问不同的mac地址就可以解决,不用到处广播
1. 多个车道,信道划分
2. 轮流协议 单双号分着出行
3. 随机接入协议 错过高峰出行
以太网,源MAC地址和目标的MAC地址在一个数据包里传输.MAC的网卡发现数据包,是自己的,就会把包收进来,打开ip包,发现ip地址是自己的就打开tcp包(不然就将继续查目标mac地址,然后打包转发出去),然后打开tcp包,发现端口也是自己的(这里也说明了,整个tcp是通过端口传输数据的)80,就会提交给一个监听这个端口的应用程序,然后应用程序就会把请求的返回数据返给源mac地址的设备,这是源mac地址就改成目标mac,原目标mac就改成源mac地址.<br>
在以太网,CRC(Cyclic Redundancy Check)是用来做 **循环冗余检测**的.通过XOR异或的算法,来计算整个包是否在发送发的过程中出错.它只能检测数据是否出错,不提供纠正功能.出错了怎么办?丢弃吗?<br>
**ARP协议** 已知IP地址求MAC地址.(地址解释协议),为ip地址到对应的硬件地址之间提供动态映射.(自动完成!)<br>
靠吼->广播,吼完就缓存,但是arp也会过期,因为ip地址可能会变.<br>
**二层设备(交换机)**,数据链路层和物理层<br>
根据策略转发的设备.通过学习,得知每个口的mac,然后形成一张转发表,根据这个转发表就知道在那个口发出去数据.<br>
### 交换机与VLAN 复杂的交换机,孤独的VLAN ID
一台交换机好说,就都通过他来通信呗,但是要是多台交换机呢?<br>
#### 多台交换机形成的拓扑结构
**环路问题** 拓扑结构复杂的形成.<br>
破除环路->stp最小生成树(Spanning Tree Protocol).<br>
Root Bridge->Designated Bridges->BPDU(Bridge Protocol Data Units)->Priority Vector(Root Bridge Id,Root Path Cost,Bridge Id and Port Id)<br>
[最小生成树](https://www.cnblogs.com/biyeymyhjob/archive/2012/07/30/2615542.html)<br>
VLAN ID在二层的头加上一个TAG,划分4096个VLAN.根据VLAN ID这个转发.<br>


### 路由器
路由器是网络中的关键设备,它在网络层(OSI模型的第三层)上工作,主要有以下几个作用:

1. **数据包转发**:路由器的主要功能是接收来自一个网络的数据包,并将其转发到另一个网络.路由器根据数据包的目标IP地址和自己的路由表来决定如何转发数据包.

2. **路由选择**:路由器使用路由协议(如RIP/OSPF/BGP等)来与其他路由器交换路由信息,并根据这些信息来建立和更新自己的路由表.路由表中的每一条路由都指示了如何到达一个特定的网络.

3. **网络连接**:路由器可以连接不同类型(如以太网/Wi-Fi/光纤等)和不同协议(如IPv4/IPv6等)的网络.这使得不同网络中的设备可以互相通信.

4. **网络分割**:路由器可以将一个大网络分割为多个小网络(或子网),每个小网络都有自己的网络地址.这可以提高网络的管理效率和数据传输效率,同时也可以提高网络的安全性.

5. **网络服务**:一些路由器还提供了DHCP/NAT/防火墙等网络服务.

总的来说,路由器是实现网络互联的关键设备,它使得不同网络中的设备可以互相通信.