# UDP 和 TCP 的特点

- 用户数据报协议 UDP(User Datagram Protocol)是无连接的,尽最大可能交付,没有拥塞控制,面向报文(对于应用程序传下来的报文不合并也不拆分,只是添加 UDP 首部),支持一对一/一对多/多对一和多对多的交互通信.

- 传输控制协议 TCP(Transmission Control Protocol)是面向连接的,提供可靠交付,有流量控制,拥塞控制,提供全双工通信,面向字节流(把应用层传下来的报文看成字节流,把字节流组织成大小不等的数据块),每一条 TCP 连接只能是点对点的(一对一).

# UDP 首部格式

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/d4c3a4a1-0846-46ec-9cc3-eaddfca71254.jpg" width="600"/> </div><br>

首部字段只有 8 个字节,包括源端口/目的端口/长度/检验和.12 字节的伪首部是为了计算检验和临时添加的.

# TCP 首部格式

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/55dc4e84-573d-4c13-a765-52ed1dd251f9.png" width="700"/> </div><br>

-   **序号**   :用于对字节流进行编号,例如序号为 301,表示第一个字节的编号为 301,如果携带的数据长度为 100 字节,那么下一个报文段的序号应为 401.

-   **确认号**   :期望收到的下一个报文段的序号.例如 B 正确收到 A 发送来的一个报文段,序号为 501,携带的数据长度为 200 字节,因此 B 期望下一个报文段的序号为 701,B 发送给 A 的确认报文段中确认号就为 701.

-   **数据偏移**   :指的是数据部分距离报文段起始处的偏移量,实际上指的是首部的长度.

-   **确认 ACK**   :当 ACK=1 时确认号字段有效,否则无效.TCP 规定,在连接建立后所有传送的报文段都必须把 ACK 置 1.

-   **同步 SYN**   :在连接建立时用来同步序号.当 SYN=1,ACK=0 时表示这是一个连接请求报文段.若对方同意建立连接,则响应报文中 SYN=1,ACK=1.

-   **终止 FIN**   :用来释放一个连接,当 FIN=1 时,表示此报文段的发送方的数据已发送完毕,并要求释放连接.

-   **窗口**   :窗口值作为接收方让发送方设置其发送窗口的依据.之所以要有这个限制,是因为接收方的数据缓存空间是有限的.
