## 编译原理

### 1. 
### 2. 编译原理 - 编译器是如何实现的？

[编译原理入门篇|一篇文章理解编译全过程](https://www.cnblogs.com/fisherss/p/13905395.html)

![image-20220126215910369](https://s2.loli.net/2022/01/26/xVbeED8TKaYIG2w.png)

## 参考

[手把手教你构建C语言编译器](https://lotabout.me/2015/write-a-C-interpreter-0/)


## c++的符号导入导出

* **C++中符号是什么意思?导入和导出又是什么?**
  * 符号: 
    在C++中，"符号"通常指的是程序中的函数名、变量名等标识符。在编译和链接过程中，这些符号被用来标识和引用代码中的特定部分。
  
  * 导入导出:
    "导入"和"导出"是动态链接库（DLL）或共享对象（SO）中的概念。当你创建一个动态链接库时，你可能会有一些函数或变量想要让其他程序或库使用，这时你就需要将这些函数或变量"导出"。"导出"就是将这些符号（函数或变量的名字）添加到库的公开符号表中，这样其他程序就可以在运行时链接到这些函数或变量。

    相反，当你的程序或库想要使用动态链接库中的函数或变量时，你需要"导入"这些符号。"导入"就是在你的程序中引用这些公开的符号，然后在运行时，动态链接器会负责找到这些符号对应的实际函数或变量。

    总的来说，"导入"和"导出"是动态链接的基础，它们允许程序在运行时共享和使用代码。

  * 符号表:
    在C++中,符号表是编译器在编译过程中创建的一种数据结构,用于存储程序中定义的各种符号(如函数名/变量名等)及其相关信息(如类型/作用域/内存位置等).

    可以使用nm命令来查看一个编译后的二进制文件(如可执行文件或库文件)的符号表.例如:
    ```c++
      nm my_program
    ```

    这将列出my_program中的所有符号,以及它们在程序中的地址.

    需要注意的是,只有在编译时开启了调试信息(如使用-g选项)时,才能在编译后的二进制文件中看到完整的符号表.否则,可能只能看到部分或没有符号信息.
    
* **linux和windows的符号导入导出的行为差异？**

  * 在Windows中,符号的导入和导出通常需要明确指定.例如,当你创建一个DLL时,你需要使用__declspec(dllexport)关键字来明确标记哪些函数或变量需要导出.同样,当你使用一个DLL时,你需要使用__declspec(dllimport)来明确标记哪些函数或变量需要导入.

    ```c++
    // 在DLL中
    __declspec(dllexport) void MyFunction();

    // 在使用DLL的程序中
    __declspec(dllimport) void MyFunction();
    ```
  * 在Linux中,情况则不同.默认情况下,所有的函数和全局变量都会被导出,除非你明确地隐藏它们.你可以使用__attribute__((visibility("default")))和__attribute__((visibility("hidden")))来控制符号的可见性.

    ```c++
    // 这个函数会被导出
    void MyFunction1();

    // 这个函数不会被导出
    __attribute__((visibility("hidden"))) void MyFunction2();
    ```
