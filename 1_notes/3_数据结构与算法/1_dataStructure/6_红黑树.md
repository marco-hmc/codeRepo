---
title: "B树、B+树是什么"
layout: post
author: "Marco"
header-style: text
hidden: true
tags:
  - 数据库
---

## B树、B+树是什么

> B树和B+树是数据库中重要的数据结构，能够实现快速的索引。了解这两种数据结构有助于读者更好明白数据库是如何工作的。
>
> 估计阅读耗时：

[toc]

### 1. 基本概念

- ***B树、B+树应用场景是什么？***

  ​	B树、B+树是数据库的常用数据，其优点在于在大型数据库能够快速找到文件。

- ***为什么要用B树、B+树？或者说快速找到文件是如何体现的？***

  ​	以[1,2,3,4,5,6,7,8,9]为例，如果我们想查找5的数据，逐个遍历访问的话就是$O(N)$的时间级别复杂度，如果是二分查找的话就是$O(logN)$的时间复杂度。在$N$很大的时候，$logN<<N$，而B树、B+树就是针对二分查找特殊设计的树。

- ***B树、B+树针对二分查找的特殊设计之处在哪？***

  ​	简单来说，这个特殊之处最核心的本质就在于都是平衡树。

  ![image-20220219094545632](https://s2.loli.net/2022/02/19/taVzf2PvGQlX41q.png)

  > [图片来源](https://zhuanlan.zhihu.com/p/27700617)

  ​	不难从左图得出，左图是非常便于二分查找的，小于当前节点的就是左节点，大于当前节点的就是右节点，等于当前节点的就是父节点。根据这种数据的存储方式，就可以实现二分查找了。

  ​	但是从右图我们也不难得出树的插入顺序有可能将树的节点变为线性结构。其本质差异就在于左边的树较右边的树更平衡。所以如果要针对数据库选择数据结构，其实就是选择一种平衡树结构，怎么让其实现自平衡。

  ​	而我们常说的红黑树、AVL树实质上都是平衡二叉树；B树和B+树则是平衡多叉树。两者的区别就在于查找路径数量。二叉树的查找路径是只有左节点和右节点的，而多叉树的查找路径可以是若干个。

  ​	如果数据更多的时候，多叉树的搜索效率又优于二叉树，这是因为IO读写速度慢的影响。详情看[这里](https://www.bilibili.com/video/BV1et4y117wc?from=search&seid=14260168568370412631&spm_id_from=333.337.0.0)

- ***B树和B+树是如何实现自平衡的？两个的区别是什么***

  ​	自平衡的实现在于插入，每当插入不满足平衡条件时，树就会变形。插入、删除时的具体变形可以看[这里](https://segmentfault.com/a/1190000020416577)，[两个的区别在于这里](cs.usfca.edu/~galles/visualization)。

### 2. 平衡多叉树

#### 2.1 B树

- ***[代码实现](https://github.com/Kronuz/cpp-btree)***

#### 2.2 B+树

* ***[代码实现](https://github.com/zcbenz/BPlusTree)***