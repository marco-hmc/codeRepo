---
title: "B树、B+树是什么"
layout: post
author: "Marco"
header-style: text
hidden: true
tags:
  - 数据库
---

## B树、B+树是什么

> B树和B+树是数据库中重要的数据结构，能够实现快速的索引。了解这两种数据结构有助于读者更好明白数据库是如何工作的。
>
> 估计阅读耗时：

[toc]

#### (14) 介绍一下b树和它的应用场景有哪些
B树也叫做B-树,或者平衡多路树,它是每个节点最多有m个子树的**平衡树**.一个m阶的B树具有如下几个特征:
1. 根结点至少有两个子女.
2. 每个中间节点都包含至多m个子树 , 每个节点包含的元素个数是其子树个数-1(其中 m/2 <= k <= m)
3. 所有的叶子结点都位于同一层.
4. 每个节点中的元素从小到大排列,节点当中k-1个元素正好是k个子树包含的元素的值域分划.

b树主要应用于文件系统中,在数据库中(mongoDB)也有应用,与B+树相比好处应该是有时不需要访问到叶节点就可以获取数据.

查询时间复杂度是logN
#### (15) 介绍一下b+树和它的应用场景有哪些
B+树是一种特殊的B树,它把数据都存储在叶子节点,并且叶节点间有指针连接.内部只存关键字(其中叶子节点的最小值作为索引)和孩子指针,简化了内部节点.

应用场景主要是数据库的索引

查询时间复杂度也是logN
https://zhuanlan.zhihu.com/p/110202102

https://blog.csdn.net/hguisu/article/details/7786014

### 1. 基本概念

- ***B树、B+树应用场景是什么？***

  ​	B树、B+树是数据库的常用数据，其优点在于在大型数据库能够快速找到文件。

- ***为什么要用B树、B+树？或者说快速找到文件是如何体现的？***

  ​	以[1,2,3,4,5,6,7,8,9]为例，如果我们想查找5的数据，逐个遍历访问的话就是$O(N)$的时间级别复杂度，如果是二分查找的话就是$O(logN)$的时间复杂度。在$N$很大的时候，$logN<<N$，而B树、B+树就是针对二分查找特殊设计的树。

- ***B树、B+树针对二分查找的特殊设计之处在哪？***

  ​	简单来说，这个特殊之处最核心的本质就在于都是平衡树。

  ![image-20220219094545632](https://s2.loli.net/2022/02/19/taVzf2PvGQlX41q.png)

  > [图片来源](https://zhuanlan.zhihu.com/p/27700617)

  ​	不难从左图得出，左图是非常便于二分查找的，小于当前节点的就是左节点，大于当前节点的就是右节点，等于当前节点的就是父节点。根据这种数据的存储方式，就可以实现二分查找了。

  ​	但是从右图我们也不难得出树的插入顺序有可能将树的节点变为线性结构。其本质差异就在于左边的树较右边的树更平衡。所以如果要针对数据库选择数据结构，其实就是选择一种平衡树结构，怎么让其实现自平衡。

  ​	而我们常说的红黑树、AVL树实质上都是平衡二叉树；B树和B+树则是平衡多叉树。两者的区别就在于查找路径数量。二叉树的查找路径是只有左节点和右节点的，而多叉树的查找路径可以是若干个。

  ​	如果数据更多的时候，多叉树的搜索效率又优于二叉树，这是因为IO读写速度慢的影响。详情看[这里](https://www.bilibili.com/video/BV1et4y117wc?from=search&seid=14260168568370412631&spm_id_from=333.337.0.0)

- ***B树和B+树是如何实现自平衡的？两个的区别是什么***

  ​	自平衡的实现在于插入，每当插入不满足平衡条件时，树就会变形。插入、删除时的具体变形可以看[这里](https://segmentfault.com/a/1190000020416577)，[两个的区别在于这里](cs.usfca.edu/~galles/visualization)。

### 2. 平衡多叉树

#### 2.1 B树

- ***[代码实现](https://github.com/Kronuz/cpp-btree)***

#### 2.2 B+树

* ***[代码实现](https://github.com/zcbenz/BPlusTree)***