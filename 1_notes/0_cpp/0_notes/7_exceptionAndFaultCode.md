## 错误码

错误处理,一般而言有两种处理方法
* 错误码
* 异常机制

目前C++提供了统一的异常机制机制,但是没有提供统一的错误码机制.

* 而C++标准库没有提供统一的错误码,主要有以下几个原因:

  1. **灵活性**:C++是一种通用的编程语言,用于各种不同的应用领域.在不同的应用领域中,可能需要处理的错误类型和数量都会有所不同.如果标准库提供了统一的错误码,可能无法满足所有应用领域的需求.

  2. **异常处理**:C++提供了异常处理机制,这是一种更强大/更灵活的错误处理方式.通过抛出异常,可以提供比错误码更丰富的错误信息,而且可以处理更复杂的错误情况.

  3. **历史原因**:C++的设计者选择了异常处理作为主要的错误处理机制,而不是错误码.这是一个设计决策,可能受到了历史原因的影响.

  虽然C++标准库没有提供统一的错误码,但是它提供了一些类和函数来处理错误.例如,`std::error_code`和`std::error_condition`类可以用来表示和处理错误,`std::system_error`异常可以用来抛出包含错误码的异常.此外,许多C++标准库函数(如文件I/O函数)会设置`errno`变量来表示错误,这可以看作是一种错误码机制.

* 异常处理机制和错误码机制都是处理错误的方式,它们各有优点和适用场景.

    **异常处理机制**更适合以下情况:

    1. **错误无法预见或无法立即处理**:例如,内存分配失败/无效的类型转换等情况,这些错误无法预见,也无法立即处理,使用异常可以将错误处理逻辑和正常逻辑分离,使代码更清晰.

    2. **错误需要跨越多个调用层次**:如果错误需要跨越多个调用层次传播,使用异常可以简化代码,避免在每一层都检查和传递错误码.

    3. **面向对象编程**:在面向对象编程中,构造函数不能返回错误码,因此使用异常是处理构造函数错误的唯一方式.

    **错误码机制**更适合以下情况:

    1. **错误可以预见并立即处理**:例如,打开文件失败/找不到指定的元素等情况,这些错误可以预见,也可以立即处理,使用错误码可以让调用者直接知道函数是否成功.

    2. **性能敏感的代码**:异常处理可能会对性能产生影响,尤其是当异常被频繁抛出时.对于性能敏感的代码,使用错误码可以避免这种性能损失.

    3. **与C语言代码交互**:C++的异常不能跨越C++和C语言的边界.如果你的C++代码需要与C语言代码交互,使用错误码是更好的选择.

    总的来说,选择使用异常处理还是错误码,取决于具体的应用场景和需求.

* 总结
  * 一般项目代码,非太底层的可以优先使用错误码机制